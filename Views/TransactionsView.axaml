<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
   xmlns:vm="clr-namespace:FinScope.ViewModels"
             x:Class="FinScope.TransactionsView"
             x:DataType="vm:TransactionsViewModel"
          >

    <UserControl.Styles>
        <Style Selector="TextBlock.header">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0 0 15 0"/>
            <Setter Property="Foreground" Value="{DynamicResource SystemAccentColorBrush}"/>
        </Style>

        <Style Selector="Border.card">
            <Setter Property="Background" Value="#FF252525"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style Selector="DataGrid">
            <Setter Property="Background" Value="#FF252525"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#FF333333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
    </UserControl.Styles>

    <ScrollViewer>
        <StackPanel Margin="20">
            <TextBlock Text="История транзакций" Classes="header"/>

            <!-- Фильтрация -->
            <WrapPanel Margin="0 0 0 10" VerticalAlignment="Center" >
                <ComboBox Width="150"
                          SelectedItem="{Binding SelectedTransactionType}"
                          ItemsSource="{Binding TransactionTypes}" 
                          PlaceholderText="Тип"/>
                <DatePicker SelectedDate="{Binding StartDate}" />
                <DatePicker SelectedDate="{Binding EndDate}" />
                <Button Content="Применить" Command="{Binding ApplyFilterCommand}" />
                <Button Content="Сбросить" Command="{Binding ResetFilterCommand}" />
            </WrapPanel>

            <!-- Таблица транзакций -->
            <Border Classes="card">
                <DataGrid ItemsSource="{Binding FilteredTransactions}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          GridLinesVisibility="None">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Дата" Binding="{Binding Date, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Width="180"/>
                        <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="120"/>
                        <DataGridTextColumn Header="Тикер" Binding="{Binding Symbol}" Width="100"/>
                        <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="100"/>
                        <DataGridTextColumn Header="Цена" Binding="{Binding Price, StringFormat='{}{0:C2}'}" Width="100"/>
                        <DataGridTextColumn Header="Сумма" Binding="{Binding Total, StringFormat='{}{0:C2}'}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>